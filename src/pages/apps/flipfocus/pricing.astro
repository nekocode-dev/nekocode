---
import BaseLayout from '@/layouts/BaseLayout.astro';
import FlipFocusNav from '@/components/nav/FlipFocusNav.astro';
import Footer from '@/components/nav/Footer.astro';
import Container from '@/components/layout/Container.astro';
import Section from '@/components/layout/Section.astro';
import Button from '@/components/ui/Button.astro';
import Tag from '@/components/ui/Tag.astro';

const base = import.meta.env.BASE_URL;

// Pricing tiers based on actual app
const pricing = {
  free: {
    name: 'Free',
    price: '$0',
    period: 'forever',
    features: [
      '5 Decks',
      '100 Cards per Deck',
      '500 Total Cards',
      '2 Game Modes',
      'Basic Analytics',
      'Basic Spaced Repetition',
      'Local Backup',
      'Core Study Features',
    ],
    cta: 'Get Started',
    highlighted: false,
  },
  pro: {
    name: 'Pro',
    price: '$1.99',
    period: '/month',
    yearlyPrice: '$19.99/year',
    features: [
      'Unlimited Decks & Cards',
      'All 7+ Game Modes',
      'FSRS-5 Algorithm',
      'OCR Text Scanning',
      'Text-to-Speech',
      'Advanced Analytics',
      'Custom Themes',
      'Ad-Free Experience',
      'Tag Analytics',
      'Bulk Import/Export',
    ],
    cta: 'Start Free Trial',
    trial: '7-day free trial',
    highlighted: true,
  },
};

const faqs = [
  {
    question: "Do I need a subscription to use the app?",
    answer: "No! The Free tier is generous and perfect for most students. You can create up to 500 cards and use the core spaced repetition features for free forever."
  },
  {
    question: "Can I use FlipFocus offline?",
    answer: "Yes, FlipFocus is an offline-first app. All your data is stored on your device, and you can study anywhere without an internet connection."
  },
  {
    question: "What happens if I cancel my Pro subscription?",
    answer: "You will keep access to all your existing decks and cards. You just won't be able to add new cards if you're over the free limit, but you can continue to study your existing cards."
  },

];
---

<BaseLayout 
  title="Pricing | FlipFocus"
  description="Simple, transparent pricing for FlipFocus. Start for free, upgrade for unlimited learning."
>
  <FlipFocusNav slot="header" />
  
  <Section size="lg" class="pricing-hero">
    <Container>
      <div class="section-header">
        <Tag variant="accent">Pricing</Tag>
        <h1 class="text-display-2">Simple, transparent pricing</h1>
        <p class="section-subtitle">Start your learning journey for free. Upgrade when you're ready to master more.</p>
      </div>
      
      <div class="pricing-grid">
        <!-- Free Tier -->
        <div class="pricing-card">
          <div class="pricing-header">
            <h3 class="pricing-name">{pricing.free.name}</h3>
            <div class="pricing-price">
              <span class="price-amount">{pricing.free.price}</span>
              <span class="price-period">{pricing.free.period}</span>
            </div>
            <p class="pricing-desc">Perfect for getting started</p>
          </div>
          
          <ul class="pricing-features">
            {pricing.free.features.map(feature => (
              <li>
                <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 6L9 17l-5-5"/>
                </svg>
                {feature}
              </li>
            ))}
          </ul>
          
          <Button href={`${base}apps/flipfocus#download`} variant="secondary" size="lg" class="pricing-cta">
            {pricing.free.cta}
          </Button>
        </div>
        
        <!-- Pro Tier -->
        <div class="pricing-card pro">
          <div class="popular-badge">âœ¨ Most Popular</div>
          
          <div class="pricing-header">
            <h3 class="pricing-name">{pricing.pro.name}</h3>
            <div class="pricing-price">
              <span class="price-amount">{pricing.pro.price}</span>
              <span class="price-period">{pricing.pro.period}</span>
            </div>
            <div class="yearly-price">or {pricing.pro.yearlyPrice} <span class="save-badge">2 Months Free</span></div>
          </div>
          
          <ul class="pricing-features">
            {pricing.pro.features.map(feature => (
              <li>
                <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 6L9 17l-5-5"/>
                </svg>
                {feature}
              </li>
            ))}
          </ul>
          
          <p class="trial-note">{pricing.pro.trial}</p>
          <Button href={`${base}apps/flipfocus#download`} variant="accent" size="lg" class="pricing-cta">
            {pricing.pro.cta}
          </Button>
        </div>
      </div>
    </Container>
  </Section>

  <Section class="faq-section">
    <Container size="narrow">
      <h2 class="text-title-1 text-center mb-12">Frequently Asked Questions</h2>
      <div class="faq-grid">
        {faqs.map(faq => (
          <div class="faq-item">
            <h3 class="faq-question">{faq.question}</h3>
            <p class="faq-answer">{faq.answer}</p>
          </div>
        ))}
      </div>
    </Container>
  </Section>
  
  <Section class="cta-section">
    <Container size="narrow" class="text-center">
      <h2 class="text-title-2 mb-6">Ready to start learning?</h2>
      <Button href={`${base}apps/flipfocus#download`} variant="accent" size="lg">
        Download FlipFocus Now
      </Button>
    </Container>
  </Section>
  
  <Footer slot="footer" />
</BaseLayout>

<style>
  .pricing-hero {
    padding-top: var(--space-8);
  }

  .section-header {
    text-align: center;
    margin-bottom: var(--space-12);
  }
  
  .section-header h1 {
    margin-top: var(--space-4);
    background: linear-gradient(135deg, var(--color-text), var(--color-text-secondary));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  .section-subtitle {
    color: var(--color-text-secondary);
    margin-top: var(--space-4);
    font-size: var(--text-lg);
    max-width: 600px;
    margin-inline: auto;
  }
  
  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-8);
    max-width: 900px;
    margin-inline: auto;
  }
  
  .pricing-card {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-2xl);
    padding: var(--space-8);
    display: flex;
    flex-direction: column;
    position: relative;
    transition: transform var(--duration-normal) var(--ease-out);
  }
  
  .pricing-card:hover {
    transform: translateY(-4px);
  }
  
  .pricing-card.pro {
    background: linear-gradient(145deg, rgba(var(--color-accent-rgb, 193, 154, 107), 0.05), rgba(var(--color-surface-rgb), 0.8));
    border-color: rgba(var(--color-accent-rgb, 193, 154, 107), 0.3);
    box-shadow: 
      0 10px 30px -10px rgba(var(--color-accent-rgb, 193, 154, 107), 0.15),
      0 0 0 1px rgba(var(--color-accent-rgb, 193, 154, 107), 0.1) inset;
  }
  
  .popular-badge {
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--color-accent);
    color: var(--color-accent-contrast);
    padding: 4px 12px;
    border-radius: var(--radius-full);
    font-size: 13px;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(var(--color-accent-rgb), 0.3);
  }
  
  .pricing-header {
    text-align: center;
    margin-bottom: var(--space-8);
    border-bottom: 1px solid var(--color-border-subtle);
    padding-bottom: var(--space-6);
  }
  
  .pricing-name {
    font-family: var(--font-display);
    font-size: var(--text-xl);
    color: var(--color-text);
    margin-bottom: var(--space-2);
  }
  
  .pricing-price {
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 2px;
  }
  
  .price-amount {
    font-size: var(--text-4xl);
    font-weight: 700;
    color: var(--color-text);
  }
  
  .price-period {
    font-size: var(--text-base);
    color: var(--color-text-secondary);
  }
  
  .pricing-desc {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    margin-top: var(--space-2);
  }
  
  .yearly-price {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    margin-top: var(--space-2);
  }
  
  .save-badge {
    color: var(--color-success, #4ade80);
    font-weight: 600;
    margin-left: 4px;
    background: rgba(74, 222, 128, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
  }
  
  .pricing-features {
    list-style: none;
    padding: 0;
    margin: 0 0 var(--space-8) 0;
    flex-grow: 1;
  }
  
  .pricing-features li {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-3);
    font-size: var(--text-base);
    color: var(--color-text-secondary);
  }
  
  .check-icon {
    width: 20px;
    height: 20px;
    color: var(--color-accent);
    flex-shrink: 0;
  }
  
  .pricing-cta {
    width: 100%;
  }
  
  .trial-note {
    text-align: center;
    font-size: var(--text-xs);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-3);
  }

  /* FAQ */
  .faq-grid {
    display: grid;
    gap: var(--space-6);
    max-width: 800px;
    margin-inline: auto;
  }
  
  .faq-item {
    background: var(--color-surface-elevated);
    padding: var(--space-6);
    border-radius: var(--radius-xl);
    border: 1px solid var(--color-border-subtle);
  }
  
  .faq-question {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: var(--space-2);
  }
  
  .faq-answer {
    color: var(--color-text-secondary);
    line-height: 1.6;
  }
  
  .text-center { text-align: center; }
  .mb-6 { margin-bottom: var(--space-6); }
  .mb-12 { margin-bottom: var(--space-12); }
</style>
